<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Profile</title>
  <link rel="stylesheet" th:href="@{/css/Profile.css}" />
</head>
<body>
<div class="profile-container">
  <h1>Your Profile</h1>

  <!-- Success Message -->
  <div id="successMessage" th:if="${success}" style="color: green; text-align: center; margin-bottom: 15px;">
    <p th:text="${success}">Profile updated successfully!</p>
  </div>

  <!-- Error Message -->
  <div id="errorMessage" th:if="${error}" style="color: red; text-align: center; margin-bottom: 15px;">
    <p th:text="${error}">Failed to update profile.</p>
  </div>

  <!-- Update Profile Form -->
  <form id="profileForm" th:action="@{/update_profile}" method="post">
    <input type="hidden" name="id" th:value="${user.id}" />

    <div class="form-group">
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" th:value="${user.username}" readonly />
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" th:value="${user.email}" required />
    </div>

    <div class="form-group">
      <label for="fullName">Full Name:</label>
      <input type="text" id="fullName" name="fullName" th:value="${user.fullName}" required />
    </div>

    <div class="form-group">
      <label for="sex">Gender:</label>
      <select id="sex" name="sex" required>
        <option value="MALE" th:selected="${user.sex == 'MALE'}">Male</option>
        <option value="FEMALE" th:selected="${user.sex == 'FEMALE'}">Female</option>
        <option value="OTHER" th:selected="${user.sex == 'OTHER'}">Other</option>
      </select>
    </div>

    <div class="form-group">
      <label for="mobileNumber">Mobile Number:</label>
      <input type="text" id="mobileNumber" name="mobileNumber" th:value="${user.mobileNumber}" required />
    </div>

    <div class="form-group">
      <label for="countryCode">Country Code:</label>
      <input type="text" id="countryCode" name="countryCode" th:value="${user.countryCode}" required />
    </div>

    <button type="submit">Update Profile</button>
  </form>

  <!-- Delete Profile Form -->
  <form th:action="@{/delete_profile}" method="post">
    <input type="hidden" name="user_id" th:value="${user.id}" />
    <button type="submit" class="confirmation-button" id="deleteProfileBtn">Delete Profile</button>
  </form>

  <a th:href="@{/dashboard}" class="back-button">Back to Dashboard</a>
</div>
<script src="/static/js/profile.js" defer></script>
</body>
</html>
